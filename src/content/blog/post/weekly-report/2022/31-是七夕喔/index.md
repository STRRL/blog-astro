---
title: "2022-31: æ˜¯ä¸ƒå¤•å–”"
date: 2022-08-07T16:10:48+08:00
lastmod: 2022-08-07T16:10:48+08:00
keywords: []
description: ""
tags:
- ç”Ÿæ´»
categories:
- å‘¨æŠ¥
author: ""
---

è¿™é‡Œåˆæ˜¯ä¸€ä»½å‘¨æŠ¥, æ—¶é—´èŒƒå›´æ˜¯`2022-08-02`åˆ°`2022-08-07`, ä¼šè®°å½•ä¸€äº›å·¥ä½œåŠç”Ÿæ´»ä¸Šæœ‰æ„æ€å’Œæ²¡é‚£ä¹ˆæœ‰æ„æ€çš„äº‹æƒ….

## å·¥ä½œ/ä»£ç /è®¡ç®—æœºç›¸å…³

### Nand2Tetris

æœ¬å‘¨æ²¡æœ‰è¿›è¡Œ Nand2Tetris çš„å­¦ä¹ .

### Google UX

æœ¬å‘¨æ²¡æœ‰è¿›è¡Œ Google UX çš„å­¦ä¹ .

### whatiknown.strrl.dev ä» logseq è¿ç§»åˆ° dendron

å‰æ–‡:

- <https://strrl.dev/post/weekly-report/2022/28-çƒ­ä¹çš„æš—é»‘3ptr/#æœ‰è¶£çš„ç¬”è®°è½¯ä»¶-dendron>
- <https://strrl.dev/post/weekly-report/2022/29-å›°å›°å›°/#åšå®¢ä»-gtihub-pages--cloudflare-proxy-è¿ç§»åˆ°-cloudflare-pages>

ç›¸å¯¹äº dendron, typora è¿™ç§æ‰€è§å³æ‰€å¾—çš„ Markdown ç¼–è¾‘å™¨, æˆ‘æ›´å–œæ¬¢ç¼–è¾‘ "Raw Markdown" + é¢„è§ˆçš„æ–¹å¼è¿›è¡Œè®°å½•.

> ä½†æ˜¯æŠ˜è…¾çš„æ—¶å€™ä¹Ÿæ³¨æ„åˆ°äº†, dendron çœŸçš„è¿˜åœ¨æ¯”è¾ƒæ—©æœŸ. ç”Ÿæˆçš„ static ç«™ä¼˜åŒ–ä¹Ÿä¸æ˜¯å¾ˆå¥½, lighthouse performance åˆ†æ•°æ¯”è¾ƒä½. è€Œä¸”æ–‡æ¡£è¯´å¾—å…¶å®ä¹Ÿäº‘é‡Œé›¾é‡Œçš„.

Cloudflare Pages è‡ªå¸¦ CI/CD, åªéœ€è¦é…ç½®ä¸‹:

- å‘½ä»¤ `npm install @dendronhq/dendron-cli@latest && npx dendron publish export`
- è¾“å‡ºç›®å½• `.next/out`

å°±é…ç½®å¥½äº†!

> ä¸éœ€è¦å†™ GitHub Action Workflow YAML, å¥½è€¶!

ç›®å‰è¿™ä¸ªç«™ <https://whatiknown.strrl.dev> ä¹Ÿè¿˜åœ¨è¿ç§»ä¸­, åç»­å†…å®¹ä¼šå†æ…¢æ…¢æ¬è¿(å¹¶é‡æ–°æ’ç‰ˆ)ä¸Šå»çš„.

### å ! å·¨å¤§å–·æµ! å•çº¿å¤šæ‹¨å ä¸Šè¡Œ

ä¹‹å‰å’ŒåŒäº‹ä¼ å¤§æ–‡ä»¶, å†æ¬¡è¢«å®¶é‡Œçš„ 30Mbps ä¸Šä¼ æ¶å¿ƒåˆ°äº†.

ä¸Šç½‘æœäº†ä¸‹, è²Œä¼¼ç”µä¿¡æ›¾ç»æœ‰ä¸€ä¸ª 50 å…ƒæ¯æœˆçš„ä¸Šè¡Œæé€ŸåŒ…å¯ä»¥æåˆ° 200Mbps, ä½†æ˜¯ç°åœ¨ä¹ŸåŠç†ä¸äº†äº†.

è€Œä¸”ç”µè¯å’¨è¯¢äº† 10000, ç›®å‰ä¹Ÿæ²¡æœ‰å…¶ä»–æ–¹å¼å¯ä»¥æé«˜ä¸Šè¡Œ.

é‚£å°±åªèƒ½è¯•ç€å•çº¿å¤šæ‹¨äº†.

å•çº¿å¤šæ‹¨çš„åŸç†æ¯”è¾ƒç®€å•:

- å…‰çŒ«æ”¹æ¡¥æ¥
- è·¯ç”±å™¨ä½¿ç”¨ macvlan å°†ä¸€ä¸ª wan è™šæ‹Ÿæˆå¤šä¸ª wan
- ä½¿ç”¨ mwan3 åš load balancing

> å­¦å¥½è®¡ç½‘æ˜¯çœŸçš„æœ‰ç”¨å•Š, åœ¨æ­¤ä¹‹å‰ macvlan åªåœ¨å­¦æ ¡æœºæˆ¿(åšè™šæ‹Ÿæœº)å’Œä¸Šå®¶å…¬å¸ IDC æœºæˆ¿(docker network)é‡Œè§è¿‡.  

ç®€å•ä»‹ç»ä¸‹ mwan3, å…¶å®å°±æ˜¯ä¸€å † iptables mangle è¡¨çš„è§„åˆ™ + ip routing table policy + å¤šå¼ è·¯ç”±è¡¨:

```text
Chain mwan3_policy_load_balance (1 references)
target     prot opt source               destination         
MARK       all  --  0.0.0.0/0            0.0.0.0/0            mark match 0x0/0x3f00 statistic mode random probability 0.25000000000 /* pppoe4 1 4 */ MARK xset 0x400/0x3f00
MARK       all  --  0.0.0.0/0            0.0.0.0/0            mark match 0x0/0x3f00 statistic mode random probability 0.33300000010 /* pppoe3 1 3 */ MARK xset 0x300/0x3f00
MARK       all  --  0.0.0.0/0            0.0.0.0/0            mark match 0x0/0x3f00 statistic mode random probability 0.50000000000 /* pppoe2 1 2 */ MARK xset 0x200/0x3f00
MARK       all  --  0.0.0.0/0            0.0.0.0/0            mark match 0x0/0x3f00 /* pppoe1 1 1 */ MARK xset 0x100/0x3f00
```

```text
root@OpenWrt:~# ip rule list
0:      from all lookup local
1001:   from all iif pppoe-pppoe1 lookup 1
1002:   from all iif pppoe-pppoe2 lookup 2
1003:   from all iif pppoe-pppoe3 lookup 3
1004:   from all iif pppoe-pppoe4 lookup 4
2001:   from all fwmark 0x100/0x3f00 lookup 1
2002:   from all fwmark 0x200/0x3f00 lookup 2
2003:   from all fwmark 0x300/0x3f00 lookup 3
2004:   from all fwmark 0x400/0x3f00 lookup 4
```

```text
root@OpenWrt:~# ip route list table 1
default via x.x.x.x dev pppoe-pppoe1 proto static metric 10 
10.80.0.0/12 via 192.168.1.203 dev br-lan proto static 
x.x.x.x dev pppoe-pppoe1 proto kernel scope link src x.x.x.x
192.168.1.0/24 dev br-lan proto kernel scope link src 192.168.1.1
root@OpenWrt:~# ip route list table 2
default via x.x.x.x dev pppoe-pppoe2 proto static metric 20 
10.80.0.0/12 via 192.168.1.203 dev br-lan proto static 
x.x.x.x dev pppoe-pppoe2 proto kernel scope link src x.x.x.x
192.168.1.0/24 dev br-lan proto kernel scope link src 192.168.1.1 
```

å››æ‹¨ä»¥åå°†ä¸Šè¡Œå·®ä¸å¤šå åˆ°äº† 100Mbps, å…ˆè¿™ä¹ˆç”¨å§.

![Upload](./assets/upload.png)

### ç»å¦™çš„ä¸»æ„: OurCloud

ä¸Šä¸‹æ–‡:

- <https://twitter.com/strrlthedev/status/1555495072103206912>
- <https://twitter.com/strrlthedev/status/1555480588026388480>

æœŸæœ›æ˜¯èƒ½å¤Ÿå°†è‡ªå·±çš„è®¾å¤‡è´¡çŒ®å‡ºæ¥, è®©å¤§å®¶ä½¿ç”¨, ç±»ä¼¼äº P2P çš„ç²¾ç¥. å’Œ BONIC Network çš„åŒºåˆ«æ˜¯, ä»»ä½•äººéƒ½å¯ä»¥å°†è‡ªå·±æƒ³æ‰§è¡Œçš„ workload è·‘åœ¨è¿™ä¸ªæ± å­é‡Œ.

å‚è€ƒ BT/PT çš„è®¾è®¡, ç°åœ¨ç›®å‰æƒ³åˆ°çš„é—®é¢˜æ˜¯:

- å¦‚ä½•åº¦é‡ CPU æ—¶é—´
- å¦‚ä½•é˜²æ­¢ä½œå¼Š

ç›¸ä¿¡ç¬¬ä¸€ä¸ªé—®é¢˜å·²ç»æœ‰æˆç†Ÿçš„æ–¹æ¡ˆäº†, æ¯”å¦‚è¯´ AWS çš„æŒ‰é‡ä»˜è´¹.

ä½†æ˜¯ç¬¬äºŒä¸ªé—®é¢˜æ¯”è¾ƒéš¾é¡¶, æš‚æ—¶è¿˜æ²¡æœ‰ä»€ä¹ˆé«˜æ•ˆçš„æ€è·¯.

### åŒæ˜¾ç¤ºå™¨è°ƒæ•™

ä¿ºç°åœ¨æ˜¯ä¸¤å°æ˜¾ç¤ºå™¨ä¸Šä¸‹é…ç½®:

- DELL U2718 HDMI åœ¨ä¸Šé¢
- DELL U2720 DP åœ¨ä¸‹é¢

![displays](./assets/displays.png)

æœ‰å¥½ä¹…æ—¶é—´äº†, æ„Ÿè§‰ä¸¤å—å±å¹•çš„é¢œè‰²ä¹Ÿå·®å¤ªå¤šäº†. è€Œä¸”ä¸Šé¢é‚£å—å±å¹•æ˜æ˜¾å¤ªäº®äº†, é¥±å’Œåº¦å ªå¿§:

![before](./assets/before.jpg)

ä»”ç»† profile ä¸‹, å‘ç° HDMI èµ°çš„æ˜¯ YPbPr, è¿™æ˜¾ç„¶ä¸å¤ªå¯¹åŠ². æœç´¢äº†ä¸‹, è¿™å¥½ä¼¼æ˜¯ amdgpu é©±åŠ¨çš„é—®é¢˜:

- ä½¿ç”¨ HDMI è¿æ¥æ˜¾ç¤ºå™¨, å½“ amdgpu é©±åŠ¨è¯†åˆ«åˆ°æ˜¾ç¤ºå™¨æ”¯æŒ YPbPr æ—¶, ä¼˜å…ˆä½¿ç”¨ YPbPr è€Œä¸æ˜¯ RGB.

Windows ä¸‹çš„ amdgpu é©±åŠ¨æœ‰ UI å¯ä»¥è¿›è¡Œé…ç½®, ä½†æ˜¯ linux ä¸‹å°±æ²¡æœ‰è¿™ä¹ˆå¥½ç”¨çš„ä¸œè¥¿äº†.

é‡‡å–çš„è§£å†³æ–¹æ¡ˆæ˜¯å‚è€ƒ[è¿™ä¸ª gist](https://gist.github.com/RLovelett/171c374be1ad4f14eb22fe4e271b7eeb), patch äº† edid æ¥éª—è¿‡ amdgpu é©±åŠ¨, è¯´"å’±ä¸æ”¯æŒ YPbPr".

åœ¨è°ƒæ•´(å¹¶å¼€å¯ Smart HDR)å, æ˜¾ç¤ºæ˜æ˜¾å˜æŸ”å’Œäº†, ä½†æ˜¯é¢œè‰²ä¾æ—§ç»Ÿä¸€:

![after](./assets/after.jpg)

### ä½¿ç”¨ Cloudflare æš´éœ²ä¸€äº›æœåŠ¡å¹¶é…ç½®

> èµ·å› æ˜¯çœ‹åˆ°äº†è¿™ä¹ˆä¸€ä¸ªæ¨, æ¨èäº†ä¸€ä¸ªè§†é¢‘, éå¸¸æœ‰æ„æ€: <https://twitter.com/yurusan_p/status/1555232890023182338>.

YouTube æ¥ç€æ¨èäº†ä¸€ä¸ªè¿™åœºå¤§ä¼šçš„å¦å¤–ä¸€ä¸ªè§†é¢‘, ä¹Ÿéå¸¸æœ‰æ„æ€: <https://www.youtube.com/watch?v=hMtu7vV_HmY>.

è®²çš„æ˜¯ä¸€äº›æš´éœ²åœ¨å…¬ç½‘çš„, æ²¡æœ‰è®¤è¯/åŠ å¯†çš„ VNC / RDP æœåŠ¡é‡Œåˆ°åº•æš´éœ²äº†ä»€ä¹ˆ, æŒ–æ˜çš„æˆæœååˆ†æœ‰è¶£:

- ç‚¼é’¢çš„ç³»ç»Ÿ
- å¤ªé˜³èƒ½ç³»ç»Ÿ
- è‡ªæ¥æ°´ä¾›æ°´ç³»ç»Ÿ
- ç©ºè°ƒç³»ç»Ÿ
- ç…¤çŸ¿ç³»ç»Ÿ
- ...

"What could possibly go wrong!"

![What could possibly go wrong!](./assets/liquid-steel.png)

æ€»ä¹‹, æŠ±ç€"æˆ‘åæ­£æ²¡æœ‰å°†è¿™ä¸ª IP / åŸŸåå‘Šè¯‰è¿‡å…¶ä»–äºº, æ²¡æœ‰äººä¼šå‘ç°çš„, èƒ½å‡ºå•¥é—®é¢˜"è¿™ç§æ€è·¯æ˜¯éå¸¸å±é™©çš„.

æ‰€ä»¥æˆ‘å°†æˆ‘ä¸Šä¸¤å¤©æš´éœ²çš„ <https://prow.strrl.cloud> ä½¿ç”¨ Cloudflare Zero Trust é…ç½®äº†ä¸‹, éœ€è¦ Auth æ‰èƒ½è®¿é—®.

æˆ‘ä½¿ç”¨ GitHub ä½œä¸º "Identity Provider"(å€Ÿç”¨ä¸€ä¸‹è¿™ä¸ªæ¦‚å¿µ), å¹¶ä¸”ç”¨ GitHub Organization + Teams å®ç°äº†ç±»ä¼¼ RBAC çš„æ•ˆæœ:

- GitHub Account æ˜¯ User
- Teams æ˜¯ Role
- ä½¿ç”¨åŠ å…¥äº†ç‰¹å®š Teams çš„ GitHub Account ç™»é™†åæ‰èƒ½è®¿é—®è¿™ä¸ªæœåŠ¡

ä½“éªŒéå¸¸å¥½, åªæ˜¯ GitHub OAuth2 App çš„ ICON è¿˜æ²¡æœ‰ç”», åé¢å†æ”¹å§.

è¿˜æœ‰ä¸€ä¸ªæ’æ›², æœŸé—´ Cloudflare æç¤ºæ¥è‡ª bot çš„æµé‡å¢åŠ äº† 60%, å¹¶æ¨èæˆ‘æŠŠ "Bot Fight Mode" æ‰“å¼€.

æˆ‘å°è¯•æ‰“å¼€äº†, ç»“æœæˆ‘è‡ªå·±ä¸Šä¸å»äº†:

![blog 403](./assets/blog-403.png)

ç„¶ååˆå¼±å¼±çš„ç»™ä»–å…³äº†. ğŸ¤£

## ç”Ÿæ´»ç›¸å…³

### è·‘æ­¥æœºä¸Šçœ‹è§†é¢‘

æœ€è¿‘å‘ç°åœ¨è·‘æ­¥æœºä¸Šå­¦ä¸œè¥¿æ•ˆæœè¿˜æ˜¯å·®åŠ²äº†ç‚¹, å¾ˆå¤šæ—¶å€™æƒ³è®°å½•ä¸œè¥¿éƒ½æ²¡æœ‰åŠæ³•è®°ä¸‹æ¥.

æ‰€ä»¥ç°åœ¨ fallback åˆ°äº†å¦ä¸€ä¸ªæ–¹æ¡ˆ: çœ‹å„ç§å¤§ä¼šè§†é¢‘çš„å½•æ’­. æ¯”å¦‚è¯´æœ€è¿‘åœ¨çœ‹ KUBECON EU 2022!

è€Œä¸”ä¸€èˆ¬ä¸€ä¸ª talk çš„æ—¶é—´åœ¨ 40 - 50 åˆ†é’Ÿå·¦å³, 1.5 å€é€Ÿçš„è¯, åŠå°æ—¶æœ‰æ°§å¯ä»¥çœ‹ 1 ä¸ª, ä¸€ä¸ªå°æ—¶æœ‰æ°§å¯ä»¥çœ‹ 2 ä¸ª. éå¸¸èˆ’æœäº†!

è€Œä¸”ä¸€èˆ¬æ¥è¯´èƒ½å¬å¾—æ‡‚çš„ talk ä¸­é‡åˆ°æœ‰è¶£çš„ç‚¹å­, ä¸ä¼šè¿‡äºç¦»å¼€è‡ªå·±çš„çŸ¥è¯†èŒƒå›´, ç”¨æ‰‹æœºè¿…é€Ÿçš„è®°å½•ä¸‹æ¥, ä¹Ÿè¿˜è¡Œ.

### é¥µä¸: åƒè¿‡éƒ½è¯´å¥½

æœ€è¿‘åœ¨ä¸¤ä¸ªåœ°æ–¹éƒ½å¾ˆå·§åœ°å¬åˆ°/èŠåˆ°äº†é¥µä¸:

- Podcast ä¸–ç•Œè«åå…¶å¦™ç‰©è¯­, EP96 è«åå…¶å¦™é…’åº—å¤§èµ, åœ¨ 25:40 å·¦å³, è§å¸ˆæåˆ°äº†é¥µä¸å£æ„Ÿååˆ†æ»´å¥½, æµ‡å¤´ä¹Ÿå¾ˆä¸°å¯Œ, ç»™å‡ºäº†æé«˜çš„è¯„ä»·!
- HZLUG, å¤§å®¶åœ¨è®¨è®ºæ—…æ¸¸å’Œæ˜†æ˜çš„æ—¶å€™, ä¸€ä½æœ‹å‹æåˆ°äº†é¥µä¸çš„è‚‰è‡Šå­éå¸¸çš„å¥½åƒ!

> ã€Šä¸–ç•Œè«åå…¶å¦™ç‰©è¯­ã€‹ç»ˆäºä¸Š Spotify äº†! å°å®‡å®™å†è§äº†æ‚¨å˜!

ä¹‹å‰åœ¨äº‘å—å¤§å­¦ä¸Šå­¦çš„æ—¶å€™ä¹Ÿç»å¸¸å’Œå¥³æœ‹å‹ä¸€èµ·åƒ 2.2 ä¸€ç¢—çš„é¥µä¸åšæ—©é¥­, å¥½åƒçš„ä¸€æ‰¹.

ä¸Šæ®µæ—¶é—´, å¥³æœ‹å‹ä¹Ÿåœ¨ç½‘ä¸Šä¹°äº†ä¸€äº›é¥µä¸è‡ªå·±ç…®ç€åƒ, å‘³é“è™½è¯´æ¯”è¾ƒè¿˜åŸ, ä½†æ˜¯è‡Šå­è¿˜æ˜¯æ²¡å•¥æ–™.

> åº”è¯¥è¿‡ä¸äº†å¤šä¹…, ä¿ºä»¬å°±ä¼šæœ‰æœºä¼šå»æ˜†æ˜ç©è€äº†, åˆ°æ—¶å€™å»åƒé¥µä¸å’Œç±³çº¿! å¸Œæœ›ç–«æƒ…ä¸è¦å†å˜ä¸¥é‡.

### æ¨èå‡ æ¬¾ç±»ä¼¼çš„, å¥½ç©çš„ Route Lite æ¸¸æˆ

åœ¨æŒºä¹…ä¹‹å‰, ä¿ºå°±æ¨èäº† "Vampire Survivors" è¿™æ¬¾æ¸¸æˆ, åæ¥è¿˜æœ‰ä¸€æ¬¾è¾ƒä¸ºç±»ä¼¼çš„æ¸¸æˆ: "é»æ˜å‰ 20 åˆ†é’Ÿ"

- <https://strrl.dev/post/weekly-report/2022/08-åªæ˜¯å¿™ç¢Œçš„ä¸€å‘¨/#æ¸¸æˆ-vampire-survivors>
- <https://strrl.dev/post/weekly-report/2022/23-ä¸è§£å¿™ç¢Œåæ€/#æ¨èæ¸¸æˆ-é»æ˜å‰-20-åˆ†é’Ÿ>

ä»–ä»¬çš„ä¸»è¦ç‰¹å¾æ˜¯, ä¸éœ€è¦å¤ªå¤šæ“ä½œè¿›è¡Œæ”»å‡», æˆ–è€…å‡ ä¹ä¸éœ€è¦æ“ä½œ, æŠ€èƒ½/æ”»å‡»è‡ªåŠ¨é‡Šæ”¾, ç©å®¶æ›´å¤šå…³æ³¨çš„æ˜¯èµ°ä½å’Œæœå‘.

è€Œè¿™å‘¨æ‰“å¼€ Steam æ¨èé˜Ÿåˆ—, æ„Ÿè§‰ä¸€ä¸‹å­å‡ºç°äº†å¥½å¤šç±»ä¼¼çš„æ¸¸æˆ:

- [SoulStone Survivors](https://store.steampowered.com/app/2066020/Soulstone_Survivors/)
- [Just King](https://store.steampowered.com/app/1059980/Just_King/)
- [Nomad Survival](https://store.steampowered.com/app/1929870/Nomad_Survival/)

éƒ½æ¯”è¾ƒæœ‰è¶£!!!

å‘¨å…­æ™šä¸Šç©äº†æŒºé•¿ä¸€æ®µæ—¶é—´ SoulStone Survivors, åœ¨å¥½ç©çš„åŒæ—¶, ç»™æˆ‘çš„æ„Ÿè§‰åœ¨å°±æ˜¯: æˆ‘ä»¬ä¹Ÿèƒ½åš, è·Ÿå¥³æœ‹å‹å¤§å­¦æ¯•è®¾æ°´å¹³å·®ä¸å¤š, æˆ‘ä¸Šæˆ‘ä¹Ÿè¡Œ!

> å•Š! å¥½æƒ³åšæ¸¸æˆå•Šå•Šå•Š!

### ä¸ƒå¤•å–”

åœ¨ä¸ƒå¤•, æˆ‘ä»¬ä½œä¸ºè€å¤«è€å¦»åœ¨ä¸­åˆè‡ªå·±çƒ¤äº†æŠ«è¨åº†ç¥, äº’ç›¸é€äº†ç¤¼ç‰©. ğŸ¥°

æ–°æ™‹ç®—åŠ›:

![Present 1](./assets/present-1.jpg)

çƒ§:

![Present 2](./assets/present-2.jpg)
